#!/bin/bash

remove=false
cd ${PWD%/public_html*}/public_html
while test $# -gt 0; do
	case "$1" in
		-h|--help)
			echo -e "Aquarius Plugin installer"
			echo -e "Adds submodules for commonly used plugins"
			echo -e "You can string multiple plugins together"
			echo -e "e.g. aquariusPlugin yoast db-migrate blocks"
			echo ""
			echo -e "-h, --help \t\t\t\t Show this help text"
			echo -e "-r, --remove \t\t\t\t Remove any plugins after this flag"
			echo -e "yoast \t\t\t\t\t install yoast"
			echo -e "db-migrate \t\t\t\t install db-migrate"
			echo -e "cf7 \t\t\t\t\t install cf7"
			echo -e "blocks, aquarius-blocks \t\t install aquarius blocks"
			echo -e "clients, aquarius-clients \t\t install aquarius clients"
			echo -e "news, aquarius-news \t\t\t install aquarius news"
			echo -e "people, aquarius-people \t\t install aquarius people"
			echo -e "permissions, aquarius-permissions \t install aquarius permissions into mu-plugins"
			echo -e "slider, aquarius-slider \t\t install aquarius slider"
			echo -e "snippets, aquarius-snippets \t\t install aquarius snippets"
			echo -e "widgets, aquarius-widgets \t\t install aquarius widgets"
			exit 0
			;;
		-r|--remove)
			remove=true
			shift
			;;
			
		yoast)
			if [ "$remove" = true ]; then
				echo "attempting to remove yoast"
				git-delete-submodule "wp-content/plugins/wordpress-seo"
			else
				echo "attempting to add yoast"
				git submodule add https://bitbucket.org/fellowshipproductionsltd/wordpress-seo.git wp-content/plugins/wordpress-seo
			fi
			shift
			;;
		db-migrate)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/plugins/wp-migrate-db"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/wp-migrate-db.git wp-content/plugins/wp-migrate-db
			fi
			shift
			;;
		cf7)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/plugins/contact-form-7"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/contact-form-7.git wp-content/plugins/contact-form-7
			fi
			shift
			;;
		aquarius-blocks|blocks)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/plugins/aquarius-blocks"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/aquarius-blocks.git wp-content/plugins/aquarius-blocks
			fi
			shift
			;;
		aquarius-clients|clients)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/plugins/aquarius-clients"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/aquarius-clients.git wp-content/plugins/aquarius-clients
			fi
			shift
			;;
		aquarius-news|news)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/plugins/aquarius-news"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/aquarius-news.git wp-content/plugins/aquarius-news
			fi
			shift
			;;
		aquarius-people|people)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/plugins/aquarius-people"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/aquarius-people.git wp-content/plugins/aquarius-people
			fi
			shift
			;;
		aquarius-permissions|permissions)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/mu-plugins/aquarius-permissions"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/aquarius-permissions.git wp-content/mu-plugins/aquarius-permissions
			fi
			shift
			;;
		aquarius-slider|slider)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/plugins/aquarius-slider"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/aquarius-slider.git wp-content/plugins/aquarius-slider
			fi
			shift
			;;
		aquarius-snippets|snippets)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/plugins/aquarius-snippets"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/aquarius-snippets.git wp-content/plugins/aquarius-snippets
			fi
			shift
			;;
		aquarius-widgets|widgets)
			if [ "$remove" = true ]; then
				git-delete-submodule "wp-content/plugins/aquarius-widgets"
			else
				git submodule add https://bitbucket.org/fellowshipproductionsltd/aquarius-widgets.git wp-content/plugins/aquarius-widgets
			fi
			shift
			;;
		*)
			echo "Unknown plugin $1"
			exit 0
			;;
	esac
	
done
